# Authentication configuration for performance testing

# Auth mechanisms
auth_mechanisms = plain login

# Allow plaintext (test environment only)
auth_allow_cleartext = yes

# PostgreSQL connection (shared perf stack)
pgsql postgres-backend {
  parameters {
    user = robin
    password = robin
    dbname = robin
  }
}

sql_driver = pgsql
passdb_default_password_scheme = SHA512-CRYPT

# Password authentication
passdb sql {
  query = SELECT email AS user, password FROM users WHERE email='%{user}'
}

# User database
userdb sql {
  query = SELECT home, uid, gid, maildir AS mail FROM users WHERE email='%{user}'
}
