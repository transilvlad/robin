<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (21) on Thu Feb 05 12:29:21 UTC 2026 -->
<title>com.mimecast.robin.mx (robin 2.0.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2026-02-05">
<meta name="description" content="declaration: package: com.mimecast.robin.mx">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../javadoc.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header"><a href="https://github.com/transilvlad/robin" target="_blank"><img src="https://github.com/transilvlad/robin/raw/master/doc/img/robin.svg" height="42" alt="Robin logo" style="float:left"><h1>Robin MTA Server and Tester</h1></a>
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#package">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Package:</p>
<ul>
<li><a href="#package-description">Description</a></li>
<li><a href="#related-package-summary">Related Packages</a></li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Package:&nbsp;</li>
<li><a href="#package-description">Description</a>&nbsp;|&nbsp;</li>
<li><a href="#related-package-summary">Related Packages</a>&nbsp;|&nbsp;</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Package com.mimecast.robin.mx" class="title">Package com.mimecast.robin.mx</h1>
</div>
<hr>
<div class="package-signature">package <span class="element-name">com.mimecast.robin.mx</span></div>
<section class="package-description" id="package-description">
<div class="block">MX record resolution with DANE and MTA-STS support.
 <p>This package provides MX record resolution with integrated security policy determination
 <br>according to RFC 7672 (DANE) and RFC 8461 (MTA-STS).

 <h2 id="key-components-heading">Key Components</h2>
 <ul>
   <li><a href="MXResolver.html" title="class in com.mimecast.robin.mx"><code>MXResolver</code></a> - Main MX resolution with DANE/MTA-STS priority</li>
   <li><a href="StrictMx.html" title="class in com.mimecast.robin.mx"><code>StrictMx</code></a> - MTA-STS policy fetching and MX filtering</li>
   <li><a href="StrictTransportSecurity.html" title="class in com.mimecast.robin.mx"><code>StrictTransportSecurity</code></a> - MTA-STS policy retrieval and validation</li>
   <li><a href="MXRoute.html" title="class in com.mimecast.robin.mx"><code>MXRoute</code></a> - MX route clustering for bulk operations</li>
 </ul>

 <h2 id="resolution-priority-rfc-8461-section-2--heading">Resolution Priority (RFC 8461 Section 2)</h2>
 <p>Per RFC 8461 Section 2: <em>"senders who implement MTA-STS validation MUST NOT allow
 <br>MTA-STS Policy validation to override a failing DANE validation."</em>

 <p><strong>Resolution Order:</strong>
 <ol>
   <li><strong>DANE (RFC 7672)</strong> - Check for TLSA records at <code>_25._tcp.&lt;mxhostname&gt;</code>
       <ul>
         <li>If TLSA records exist, DANE policy applies</li>
         <li>TLS becomes MANDATORY with certificate validation against TLSA</li>
         <li>MTA-STS is skipped (DANE takes absolute precedence)</li>
       </ul>
   </li>
   <li><strong>MTA-STS (RFC 8461)</strong> - If no DANE, check for MTA-STS policy
       <ul>
         <li>Fetch policy from <code>https://mta-sts.&lt;domain&gt;/.well-known/mta-sts.txt</code></li>
         <li>TLS becomes MANDATORY with PKI certificate validation</li>
         <li>MX hosts must match policy patterns</li>
       </ul>
   </li>
   <li><strong>Opportunistic</strong> - If neither DANE nor MTA-STS available
       <ul>
         <li>TLS is attempted if advertised (STARTTLS)</li>
         <li>Cleartext fallback is acceptable</li>
       </ul>
   </li>
 </ol>

 <h2 id="usage-patterns-heading">Usage Patterns</h2>

 <h3 id="secure-mx-resolution-recommended--heading">Secure MX Resolution (Recommended)</h3>
 <pre><code>
 MXResolver resolver = new MXResolver();
 List&lt;SecureMxRecord&gt; secureMxList = resolver.resolveSecureMx("example.com");

 for (SecureMxRecord secureMx : secureMxList) {
     String mxHost = secureMx.getHostname();
     int priority = secureMx.getPriority();
     SecurityPolicy policy = secureMx.getSecurityPolicy();

     // Set policy on session before connecting.
     session.setSecurityPolicy(policy);
     session.setMx(List.of(mxHost));

     // Connect - TLS enforcement happens automatically.
     connection.connect();
 }
 </code></pre>

 <h3 id="legacy-mx-resolution-heading">Legacy MX Resolution</h3>
 <pre><code>
 MXResolver resolver = new MXResolver();
 List&lt;DnsRecord&gt; mxList = resolver.resolveMx("example.com");
 // Returns MX records but without security policy information.
 </code></pre>

 <h3 id="bulk-domain-resolution-with-clustering-heading">Bulk Domain Resolution with Clustering</h3>
 <pre><code>
 List&lt;String&gt; domains = List.of("example1.com", "example2.com", "example3.com");
 MXResolver resolver = new MXResolver();
 List&lt;MXRoute&gt; routes = resolver.resolveRoutes(domains);

 // Routes cluster domains with identical MX topology.
 for (MXRoute route : routes) {
     List&lt;String&gt; domainsInRoute = route.getDomains();
     List&lt;MXServer&gt; servers = route.getServers();
     // ... process clustered domains.
 }
 </code></pre>

 <h2 id="dane-support-heading">DANE Support</h2>
 <p>See <a href="dane/package-summary.html"><code>com.mimecast.robin.mx.dane</code></a> package for DANE TLSA record checking.

 <h2 id="important-notes-heading">Important Notes</h2>
 <ul>
   <li>DANE requires DNSSEC-validated DNS responses (not currently enforced in XBillDnsRecordClient)</li>
   <li>MTA-STS requires HTTPS connectivity to fetch policies</li>
   <li>Security policies are enforced in <a href="../smtp/extension/client/ClientStartTls.html" title="class in com.mimecast.robin.smtp.extension.client"><code>ClientStartTls</code></a></li>
   <li>Certificate validation for DANE is performed by <a href="../smtp/security/DaneTrustManager.html" title="class in com.mimecast.robin.smtp.security"><code>DaneTrustManager</code></a></li>
 </ul></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="https://tools.ietf.org/html/rfc7672">RFC 7672 - DANE for SMTP</a></li>
<li><a href="https://tools.ietf.org/html/rfc8461">RFC 8461 - MTA-STS</a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div id="related-package-summary">
<div class="caption"><span>Related Packages</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Package</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><a href="../package-summary.html">com.mimecast.robin</a></div>
<div class="col-last even-row-color">
<div class="block">The main package for Robin, a versatile MTA Server and Tester.</div>
</div>
<div class="col-first odd-row-color"><a href="assets/package-summary.html">com.mimecast.robin.mx.assets</a></div>
<div class="col-last odd-row-color">
<div class="block">Data objects and validators for MTA-STS.</div>
</div>
<div class="col-first even-row-color"><a href="cache/package-summary.html">com.mimecast.robin.mx.cache</a></div>
<div class="col-last even-row-color">
<div class="block">Caching mechanisms for MTA-STS policies.</div>
</div>
<div class="col-first odd-row-color"><a href="client/package-summary.html">com.mimecast.robin.mx.client</a></div>
<div class="col-last odd-row-color">
<div class="block">Clients for fetching MTA-STS policies and DNS records.</div>
</div>
<div class="col-first even-row-color"><a href="config/package-summary.html">com.mimecast.robin.mx.config</a></div>
<div class="col-last even-row-color">
<div class="block">Configuration for MTA-STS.</div>
</div>
<div class="col-first odd-row-color"><a href="dane/package-summary.html">com.mimecast.robin.mx.dane</a></div>
<div class="col-last odd-row-color">
<div class="block">DNS-Based Authentication of Named Entities (DANE) support for SMTP.</div>
</div>
<div class="col-first even-row-color"><a href="exception/package-summary.html">com.mimecast.robin.mx.exception</a></div>
<div class="col-last even-row-color">
<div class="block">Custom exceptions for MTA-STS operations.</div>
</div>
<div class="col-first odd-row-color"><a href="stream/package-summary.html">com.mimecast.robin.mx.stream</a></div>
<div class="col-last odd-row-color">
<div class="block">Stream handling for MTA-STS.</div>
</div>
<div class="col-first even-row-color"><a href="util/package-summary.html">com.mimecast.robin.mx.util</a></div>
<div class="col-last even-row-color">
<div class="block">Utility classes for MTA-STS.</div>
</div>
</div>
</div>
</li>
<li>
<div id="class-summary">
<div class="caption"><span>Classes</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="DaneMain.html" title="class in com.mimecast.robin.mx">DaneMain</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">DANE CLI tool for checking TLSA records.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="MtaStsMain.html" title="class in com.mimecast.robin.mx">MtaStsMain</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">CLI runnable.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="MXResolver.html" title="class in com.mimecast.robin.mx">MXResolver</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">MXResolver encapsulates MX record resolution with DANE and MTA-STS support.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="MXRoute.html" title="class in com.mimecast.robin.mx">MXRoute</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">MXRoute groups domains that share the same ordered MX server list.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="MXServer.html" title="class in com.mimecast.robin.mx">MXServer</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Server entry for a route, keeping its host, priority and the domains using it.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="SessionRouting.html" title="class in com.mimecast.robin.mx">SessionRouting</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Session routing based on MX resolution.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="StrictMx.html" title="class in com.mimecast.robin.mx">StrictMx</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Strict MX.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="StrictTransportSecurity.html" title="class in com.mimecast.robin.mx">StrictTransportSecurity</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Strict Transport Security.</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2026. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
