{
  $schema: "../../../../../main/resources/schema/case.schema.json",

  // How many times to try and establish a connection to remote server. First counts.
  retry: 2,

  // Delay between tries.
  delay: 5,

  // Default MX list and port to attempt to deliver the email to.
  mx: [
    "127.0.0.1"
  ],
  port: 587,

  // Enable TLS.
  tls: true,

  // Enable authentication.
  auth: true,
  user: "tony@example.com",
  pass: "stark",

  // Email envelopes.
  envelopes: [
    // Envelope one.
    {
      mail: "tony@example.com",

      rcpt: [
        "pepper@example.com"
      ],

      // Email eml file to transmit.
      file: "src/test/resources/cases/sources/lipsum.eml",

      // Assertions to run against the envelope.
      assertions: {

        // Protocol assertions.
        // Check SMTP responses match regular expressions.
        protocol: [
          ["MAIL", "^250 2.1.0 Sender OK"],
          ["RCPT", "^250 2.1.5 Recipient OK"],
          ["DATA", "^250 2.0.0 Received OK"]
        ],

        // External assertions.
        external: [
          {
            // Assertion type IMAP for pulling emails.
            type: "imap",

            // How long to wait before asserting.
            wait: 5,

            // Delay between log pulling attempts.
            delay: 5,

            // How many times to retry should no logs be found or valid.
            retry: 3,

            // IMAP server to connect to.
            server: "localhost",
            port: 993,

            // User credentials.
            user: "tony@example.com",
            pass: "stark",

            // Folder to check for the email.
            folder: "Sent",

            // What to check in the email.
            matches: {
              // Check headers.
              headers: [
                [ "subject", "Lipsum" ]
              ]
            }
          }
        ]
      }
    }
  ],

  // Assertions to run against the connection.
  assertions: {
    // Protocol assertions.
    // Check SMTP responses match regular expressions.
    protocol: [
      [ "SMTP", "^220" ],
      [ "EHLO", "STARTTLS" ],
      [ "SHLO", "^250-Welcome" ],
      [ "QUIT" ]
    ]
  }
}