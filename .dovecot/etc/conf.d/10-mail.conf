# This file configures mail storage.

# The location where mail is stored.
mail_location = maildir:/var/mail/vhosts/%d/%n

# The first valid UID for mail users. This is used to prevent
# logging in as system users.
first_valid_uid = 90
last_valid_uid = 0

# Attachment de-duplication.
mail_attachment_dir = /var/mail/attachments
mail_attachment_min_size = 64k

# Limit concurrent connections per user/IP.
mail_max_userip_connections = 40

# Performance tuning (optional; keep defaults if unsure).
maildir_very_dirty_syncs = no

# Base mail plugins (others extend via their own conf fragments).
mail_plugins = $mail_plugins quota lazy_expunge zlib fts fts_lucene

# Compression and plugin settings.
plugin {
  zlib_save = lz4
  zlib_save_level = 3
  zlib_min_size = 1k
  # Lazy expunge target (moved inside plugin block to be valid).
  lazy_expunge = .EXPUNGED/
}
